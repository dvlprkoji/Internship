<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sptek.spdevteam.intern.content.mybatis.ListMapper">
    <select id="getList" parameterType="sptek.spdevteam.intern.content.domain.ContentExcel" resultType="sptek.spdevteam.intern.content.domain.ContentExcel">
        SELECT
            ctn_seq as ctnSeq,
            tpl_cd as tplCd,
            src_cd as srcCd,
            ctn_nm as ctnNm,
            dsp_st_dt as dspStDt,
            dsp_end_dt as dspEndDt,
            ctn_div as ctnDiv,
            dsp_yn as dspYn
        FROM internsc.tb_ctn
        WHERE
            dsp_st_dt <![CDATA[>=]]> #{dspStDt}
            AND dsp_end_dt <![CDATA[<=]]> #{dspEndDt}
            AND
            ctn_nm LIKE '%' || #{ctnNm} || '%'
            <if test='dspYn!=null &amp;&amp; !dspYn.equals("all")'>
                AND dsp_yn = #{dspYn}
            </if>
            <if test='srcCd!=null &amp;&amp; !srcCd.equals("all")'>
                AND src_cd = #{srcCd}
            </if>
            <if test='tplCd!=null &amp;&amp; !tplCd.equals("all")'>
                AND tpl_cd = #{tplCd}
            </if>
            <if test='ctnDiv!=null &amp;&amp; !ctnDiv.equals("all")'>
                AND ctn_div = #{ctnDiv}
            </if>
    </select>
</mapper>